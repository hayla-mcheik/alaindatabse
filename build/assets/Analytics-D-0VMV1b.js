import{u as V,r as g,c as r,a as v,b as a,h as A,w as _,d as e,e as S,f as u,n as B,o as d,g as h,F as y,i as w,t as n,j as p,v as m,k as D}from"./app-B-9FXUnp.js";import{_ as U}from"./AuthenticatedLayout-CPCY7Edd.js";const M={class:"py-12"},N={class:"mx-auto max-w-7xl sm:px-6 lg:px-8"},E={class:"overflow-hidden bg-white shadow-xl sm:rounded-lg p-8"},P={key:0,class:"mt-2 text-sm text-gray-600"},z={key:1,class:"mt-2 text-sm text-red-600"},I={key:0,class:"bg-green-100 border-l-4 border-green-500 text-green-700 p-4 rounded-lg"},L=["disabled"],T={key:0,class:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24"},j={class:"mt-10 pt-6 border-t border-gray-200"},H={class:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-6"},K=["disabled"],Q={key:0,class:"mt-8 overflow-x-auto"},$={class:"min-w-full text-sm border border-gray-200 rounded-lg"},q={class:"px-4 py-2 border"},G={class:"px-4 py-2 border"},J={class:"px-4 py-2 border"},O={class:"px-4 py-2 border"},R={class:"px-4 py-2 border"},W={key:1,class:"mt-4 text-gray-500"},ee={__name:"Analytics",setup(X){const s=V({excel_files:[]}),x=g(!1),o=g({client:"",agency:"",budget:"",platform:"",country:""}),b=g([]),i=g(!1),k=()=>{x.value=!1,s.post(route("analytics.importData"),{onSuccess:()=>{x.value=!0,s.reset("excel_files")}})},C=c=>{s.excel_files=Array.from(c.target.files),s.errors.excel_files&&delete s.errors.excel_files},F=()=>{i.value=!0,D.get(route("analytics.filter"),o.value,{preserveState:!0,onSuccess:c=>{b.value=c.props.data||[],i.value=!1},onError:()=>{i.value=!1}})};return(c,t)=>(d(),r(y,null,[v(a(A),{title:"Analytics"}),v(U,null,{header:_(()=>[...t[5]||(t[5]=[e("h2",{class:"text-xl font-semibold leading-tight text-gray-800"}," Data Analytics & Import ",-1)])]),default:_(()=>[e("div",M,[e("div",N,[e("div",E,[t[17]||(t[17]=e("h3",{class:"text-2xl font-bold mb-6 text-indigo-700"}," Import Excel Files ",-1)),e("form",{onSubmit:S(k,["prevent"]),class:"space-y-6"},[e("div",null,[t[7]||(t[7]=e("label",{for:"excel_files",class:"block text-sm font-medium text-gray-700 mb-2"}," Select 3 Excel Files for Import ",-1)),e("input",{id:"excel_files",type:"file",multiple:"",onChange:C,class:B([{"border-red-500":a(s).errors.excel_files},"w-full border border-gray-300 rounded-lg p-2 focus:border-indigo-500 transition duration-150"]),accept:".xlsx, .xls, .csv"},null,34),a(s).excel_files.length?(d(),r("div",P,[t[6]||(t[6]=h(" Selected: ",-1)),(d(!0),r(y,null,w(a(s).excel_files,(l,f)=>(d(),r("span",{key:f,class:"mr-3 p-1 bg-indigo-50 rounded-md"},n(l.name),1))),128))])):u("",!0),a(s).errors.excel_files?(d(),r("p",z,n(a(s).errors.excel_files),1)):u("",!0)]),x.value?(d(),r("div",I,[...t[8]||(t[8]=[e("p",{class:"font-bold"},"Success!",-1),e("p",null,"Files uploaded and merged successfully.",-1)])])):u("",!0),e("button",{type:"submit",disabled:a(s).processing||a(s).excel_files.length===0,class:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg shadow-sm text-white bg-indigo-600 hover:bg-indigo-700 transition duration-150 disabled:opacity-50 disabled:cursor-not-allowed"},[a(s).processing?(d(),r("svg",T,[...t[9]||(t[9]=[e("circle",{class:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor","stroke-width":"4"},null,-1),e("path",{class:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"},null,-1)])])):u("",!0),h(" "+n(a(s).processing?"Processing...":"Upload & Merge Files"),1)],8,L)],32),e("div",j,[t[16]||(t[16]=e("h3",{class:"text-xl font-bold mb-4 text-gray-800"},"Filter Merged Data",-1)),e("div",H,[e("div",null,[t[10]||(t[10]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Client",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>o.value.client=l),class:"w-full border rounded-md p-2",placeholder:"Client name"},null,512),[[m,o.value.client]])]),e("div",null,[t[11]||(t[11]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Agency",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>o.value.agency=l),class:"w-full border rounded-md p-2",placeholder:"Agency name"},null,512),[[m,o.value.agency]])]),e("div",null,[t[12]||(t[12]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Budget",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[2]||(t[2]=l=>o.value.budget=l),class:"w-full border rounded-md p-2",placeholder:"Budget"},null,512),[[m,o.value.budget]])]),e("div",null,[t[13]||(t[13]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Platform",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[3]||(t[3]=l=>o.value.platform=l),class:"w-full border rounded-md p-2",placeholder:"Platform"},null,512),[[m,o.value.platform]])]),e("div",null,[t[14]||(t[14]=e("label",{class:"block text-sm font-medium text-gray-700 mb-1"},"Country",-1)),p(e("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>o.value.country=l),class:"w-full border rounded-md p-2",placeholder:"e.g. Qatar, Kuwait..."},null,512),[[m,o.value.country]])])]),e("button",{onClick:F,disabled:i.value,class:"px-6 py-3 bg-indigo-600 hover:bg-indigo-700 text-white rounded-lg font-semibold transition disabled:opacity-50"},n(i.value?"Filtering...":"Apply Filters"),9,K),b.value.length?(d(),r("div",Q,[e("table",$,[t[15]||(t[15]=e("thead",{class:"bg-gray-100 text-gray-700 font-semibold"},[e("tr",null,[e("th",{class:"px-4 py-2 border"},"Client"),e("th",{class:"px-4 py-2 border"},"Agency"),e("th",{class:"px-4 py-2 border"},"Budget"),e("th",{class:"px-4 py-2 border"},"Platform"),e("th",{class:"px-4 py-2 border"},"Country")])],-1)),e("tbody",null,[(d(!0),r(y,null,w(b.value,(l,f)=>(d(),r("tr",{key:f,class:"odd:bg-white even:bg-gray-50"},[e("td",q,n(l[0]),1),e("td",G,n(l[1]),1),e("td",J,n(l[2]),1),e("td",O,n(l[3]),1),e("td",R,n(l[4]),1)]))),128))])])])):i.value?u("",!0):(d(),r("p",W," No filtered data to display yet. "))])])])])]),_:1})],64))}};export{ee as default};
